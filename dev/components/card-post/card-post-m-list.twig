{# card-post-m-list.twig

  Входные:
  - title       (string)
  - icon        (string)
  - posts       (array)  — [{ href, title, thumb, published_at, sport?, league? }]
  - link_url    (string)
  - link_label  (string)
  - extra_class (string)
  - limit       (int)    — по умолчанию 4; 0 или отсутствует = все
#}

{% set _title       = title|default('Latest Posts') %}
{% set _icon        = icon|default('article') %}
{% set _posts       = posts|default([]) %}
{% set _limit       = limit|default(4) %}
{% set _link_url    = link_url|default('#') %}
{% set _link_label  = link_label|default('See all') %}
{% set _extra_class = extra_class|default('') %}

{# если limit <= 0 — показываем все #}
{% set _items = (_limit is defined and _limit > 0) ? (_posts|slice(0, _limit)) : _posts %}

<section class="card-post-m-list {{ _extra_class }}">
  {% include "../section-head/section-head.twig" with {
    title: _title,
    icon:  _icon,
    logo:  logo|default(null),
    link_url: _link_url,
    link_label: _link_label
  } only %}

  <div class="card-post-m-list__grid">
    {% for post in _items %}
      {% include "./card-post-m.twig" with {
        href:        post.href,
        title:       post.title,
        thumb_src:   post.thumb,          
        date_value:  post.published_at,   
        sport:       post.sport|default(null),
        league:      post.league|default(null)
      } only %}
    {% endfor %}
  </div>
</section>
