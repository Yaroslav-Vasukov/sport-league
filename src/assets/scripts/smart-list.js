function q(){const m=Array.from(document.querySelectorAll('[data-module="smart-list"]'));m.length&&m.forEach(e=>{const a={perPage:Number(e.dataset.perPage||9),sort:e.dataset.sort||"date-desc",listSelector:e.dataset.listSelector||"[data-list]",itemSelector:e.dataset.itemSelector||"[data-item], [data-post], [data-live-item]",filterSelector:e.dataset.filterSelector||"[data-filter]",searchSelector:e.dataset.searchSelector||"[data-search]",moreSelector:e.dataset.moreSelector||"[data-more]",emptySelector:e.dataset.emptySelector||"[data-empty]",countSelector:e.dataset.countSelector||"[data-count]",tagsAttr:e.dataset.tagsAttr||"tags",dateAttr:e.dataset.dateAttr||"date"},n=e.querySelector(a.listSelector);if(!n)return;const c=Array.from(n.querySelectorAll(a.itemSelector)),h=Array.from(e.querySelectorAll(a.filterSelector)),i=e.querySelector(a.searchSelector),l=e.querySelector(a.moreSelector),g=e.querySelector(a.emptySelector),p=e.querySelector(a.countSelector);c.forEach(t=>{const r=t.dataset[a.tagsAttr]||"";t._tags=r.toLowerCase().replace(/[,;]+/g," ").split(/\s+/).filter(Boolean),t._text=(t.textContent||"").toLowerCase(),t._date=t.dataset[a.dateAttr]?new Date(t.dataset[a.dateAttr]):null}),(a.sort==="date-desc"||a.sort==="date-asc")&&c.sort((t,r)=>{const s=t._date?t._date.getTime():0,A=r._date?r._date.getTime():0;return a.sort==="date-desc"?A-s:s-A}).forEach(t=>n.appendChild(t));let u="all",f="",o=0;const y=t=>{const r=u==="all"||t._tags.includes(u),s=!f||t._text.includes(f);return r&&s};function E(){const t=c.filter(y).length;p&&(p.textContent=`Shown ${o} of ${t}`),g&&(g.hidden=t>0),l&&(l.hidden=o>=t||t===0)}function S(){c.forEach(t=>t.hidden=!0),o=0}function d(){let t=0;for(const r of c)if(r.hidden&&y(r)&&(r.hidden=!1,o++,t++,t>=a.perPage))break;E()}S(),d(),l==null||l.addEventListener("click",d),h.forEach(t=>{t.addEventListener("click",()=>{h.forEach(r=>{const s=r===t;r.classList.toggle("is-active",s),r.setAttribute("aria-pressed",s?"true":"false")}),u=(t.dataset.filter||"all").toLowerCase(),S(),d()})}),i&&i.addEventListener("input",()=>{f=i.value.trim().toLowerCase(),S(),d()})})}export{q as default};
